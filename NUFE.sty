\mode<presentation>

\newif\ifbeamer@secheader
\beamer@secheaderfalse

%\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\ProcessOptionsBeamer

\useoutertheme[footline=authorinstitutetitle,subsection=false]{smoothbars}
\makeatletter % [add curpage/total page at the bottom](http://tex.stackexchange.com/questions/100838/beamer-dresden-theme-miniframes-appeareance-and-frame-number-insertion)
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
\setbeamertemplate{footline} 
  {%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
      \hfill%
      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
      {\usebeamerfont{title in head/foot}\insertshorttitle}%
      \hfill%
      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
  }
\makeatother

\useinnertheme{circles}

% 主要的调整单列于此
\definecolor{Light_Yellow}{HTML}{CF7F19}
\definecolor{Light_Green}{HTML}{007C63}
\definecolor{Lake_Blue}{HTML}{7192C5}
% 颜色Nature
\definecolor{Nature_1}{HTML}{F4FCD9}
\definecolor{Nature_2}{HTML}{C5D8A4}
\definecolor{Nature_3}{HTML}{BB9981}
\definecolor{Nature_4}{HTML}{534340}
% 颜色Vintage
\definecolor{Vintage_1}{HTML}{E5E3C9}
\definecolor{Vintage_2}{HTML}{B4CFB0}
\definecolor{Vintage_3}{HTML}{94B49F}
\definecolor{Vintage_4}{HTML}{789395}
% 颜色Cream
\definecolor{Cream_1}{HTML}{F7FBFC}
\definecolor{Cream_2}{HTML}{D6E6F2}
\definecolor{Cream_3}{HTML}{B9D7EA}
\definecolor{Cream_4}{HTML}{769FCD}

\setlength{\parindent}{2em}

\setmainfont{Times New Roman}
\setsansfont{Arial}
% \setmonofont{Georgia} % 可以更改代码所采用的等宽字体，默认是打字机体。

\setbeamerfont{author}{size=\normalsize,family=\CJKfamily{zhhei}}
\setbeamerfont{date}{size=\small,family=\CJKfamily{zhsong},family=\rmfamily}
\setbeamerfont{institute}{size=\small,family=\CJKfamily{zhsong}}
\setbeamerfont{title}{size=\Large,family=\CJKfamily{zhhei},family=\sffamily}
\setbeamerfont{subtitle}{size=\normalsize,family=\CJKfamily{zhsong}}
\setbeamerfont{section in toc}{size=\large,family=\sffamily,family=\CJKfamily{zhsong}}
\setbeamerfont{footnote}{size=\footnotesize,family=\rmfamily}

\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\bfseries\color{Vintage_4},
    emphstyle=\ttfamily\color{Cream_4},
    stringstyle=\color{Nature_4},
    numbers=left,
    numberstyle=\small\color{Lake_Blue},
    rulesepcolor=\color{Vintage_1},
    frame=shadowbox,
}

\newenvironment{Quotation}[1]
    {\newcommand\quotesource{#1}
    \begin{quotation}}
    {\par\hfill\sffamily\CJKfamily{zhhei}\bfseries\setlength\leftskip{2em} ——\quotesource
    \end{quotation}}

\newcommand*\octagon[1]{
  \tikz[baseline=(ori.base)]{\node[shape=rectangle,inner sep=2pt] (ori) {#1};\draw (ori.north west)--($(ori.north west) ! 1/(sqrt(2)+1) ! -45 : (ori.south west)$)--($(ori.south west) ! 1/(sqrt(2)+1) ! 45 : (ori.north west)$)--(ori.south west)--(ori.south east)--($(ori.south east) ! 1/(sqrt(2)+1) ! -45 : (ori.north east)$)--($(ori.north east) ! 1/(sqrt(2)+1) ! 45 : (ori.south east)$)--(ori.north east)-- cycle;}
  }
% 主要的调整结束

%\useoutertheme{default}
%\useinnertheme[shadow=true]{rounded}

\xdefinecolor{NUFE}{HTML}{B31A20}
\xdefinecolor{NUFE2}{HTML}{991805}

\setbeamercolor{footline}{bg=NUFE}
\setbeamercolor{frametitle}{bg=NUFE,fg=white}
\setbeamercolor{title}{bg=NUFE}
\setbeamerfont{frametitle}{size=\normalsize}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{bibliography item}[text]
\setbeamertemplate{caption}[numbered]

\setbeamercolor{palette primary}{use=structure,fg=white,bg=NUFE}
\setbeamercolor{palette secondary}{use=structure,fg=white,bg=NUFE2}
\setbeamercolor{palette tertiary}{use=structure,fg=white,bg=NUFE2}
\setbeamercolor{palette quaternary}{fg=white,bg=NUFE2}
%\setbeamercolor*{sidebar}{use=structure,bg=structure.fg}
\setbeamercolor{titlelike}{parent=palette primary}

%% try
\setbeamercolor{block title}{bg=Vintage_3,fg=white}
\setbeamercolor*{block title example}{use={normal text,example text},bg=white,fg=NUFE}
\setbeamercolor{block body}{bg=Vintage_3!10, fg=Vintage_4}
\setbeamertemplate{blocks}[rounded][shadow=false]

\setbeamercolor{fine separation line}{}
\setbeamercolor{item projected}{fg=white}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
%\setbeamercolor{palette sidebar quaternary}{fg=white}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg=grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=NUFE}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{fg=NUFE}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
\AtBeginSection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}
\AtBeginSubsection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}

\mode
<all>
